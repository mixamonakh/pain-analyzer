настройка коннектора в ЮИ

ЮИ конфига

типо
⚙️ Настройки системы

Сбор данных:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Таймаут запроса (мс):      [15000]
Задержка между запросами:  [800]
Макс. документов на run:   [1000]

Обработка текста:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Длина превью (символов):   [800]

Кластеризация:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Порог похожести:           [0.35] (0-1)
Мин. размер кластера:      [3]

Хранение:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Хранить документы (дней):  [30]

[Сохранить]



ПРОКСИ В ТГ !!!!











Нет явного разделения component в логах
В worker вижу логи для этапов:

'fetch' → сбор

'cluster' → кластеризация

'parse' → нормализация

Но нет явного:

'normalize' (вместо 'parse')

'export'

→ Добавь логи для экспорта:

typescript
logEvent('info', 'export', 'Exporting run data', { runId });
exportRunData(runId);
logEvent('info', 'export', 'Export complete', { runId });
2. Worker: всё в одной транзакции
Код:

typescript
const transaction = sqlite.transaction(() => {
  result.items.forEach((rawItem) => {
    // создание documents + raw_items
  });
});
Проблема: если 100 источников и один падает в середине → откатывается ВСЁ.

Рекомендация для MVP: оставь как есть (проще отладка). Но в будущем делай:

Одна транзакция = один источник

Ошибка одного источника не роняет весь run



https://www.perplexity.ai/search/vot-moi-repozitorii-https-gith-kl6aIBn0QAeZTAdev9VLCw

Таблицы версий:

run_versions (хранит конфиг пайплайна).

run_version_stages (статистика по каждому этапу).

run_version_samples (sample документов для preview и LLM-анализа).

Колонка full_storage в run_versions (пока не используем, но место есть).

НЕ создаём сейчас:

Таблицу полного хранения версий (создадим позже, если нужна).
