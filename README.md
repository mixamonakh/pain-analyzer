```text
RSS-–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–µ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ TF-IDF –∏ cosine similarity. –°–∏—Å—Ç–µ–º–∞ —Å–æ–±–∏—Ä–∞–µ—Ç –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –∏—Ö –ø–æ —Ç–µ–º–∞–º –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç—ã.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              RSS Sources (10 active)             ‚îÇ
‚îÇ  Habr | VC.ru | TechCrunch | The Verge | ...    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Worker Process                    ‚îÇ
‚îÇ  - Fetch RSS feeds                             ‚îÇ
‚îÇ  - Parse items                                 ‚îÇ
‚îÇ  - Normalize URLs                              ‚îÇ
‚îÇ  - Deduplicate                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           SQLite Database                      ‚îÇ
‚îÇ  - documents (384)                             ‚îÇ
‚îÇ  - sources (10 active)                         ‚îÇ
‚îÇ  - clusters (29)                               ‚îÇ
‚îÇ  - runs (6)                                    ‚îÇ
‚îÇ  - config                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Clustering Pipeline                    ‚îÇ
‚îÇ  Tokenize ‚Üí TF-IDF ‚Üí Cosine Sim ‚Üí Group       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Next.js Frontend                  ‚îÇ
‚îÇ  - Dashboard (runs list)                       ‚îÇ
‚îÇ  - Sources management                          ‚îÇ
‚îÇ  - Clusters view                               ‚îÇ
‚îÇ  - Export (JSON/JSONL/MD/ZIP)                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Runtime:** Node.js 24+
- **Database:** SQLite 3 + Drizzle ORM
- **RSS Parsing:** rss-parser
- **NLP:** natural (tokenization), stopword (RU+EN)
- **Logging:** pino + pino-pretty
- **HTTP:** axios (retry + proxy support)

### Frontend
- **Framework:** Next.js 15.1.4 (App Router)
- **UI:** React 19, Tailwind CSS, shadcn/ui
- **State:** React Server Components + API Routes

### DevOps
- **Package Manager:** npm
- **TypeScript:** 5.7.3
- **Build:** Next.js production build
- **Process Management:** npm scripts (worker, dev)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```

pain-analyzer/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                    \# Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/                \# API Routes
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clusters/       \# GET /api/clusters, /api/clusters/:id
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export/         \# GET /api/export/:runId (ZIP download)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logs/           \# GET /api/logs?runId=X
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ runs/           \# GET/POST /api/runs, /api/runs/start
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search/         \# GET /api/search?q=...
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sources/        \# CRUD /api/sources
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clusters/[id]/      \# Cluster detail page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ runs/[id]/          \# Run detail page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search/             \# Search page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sources/            \# Sources management page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx          \# Root layout
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx            \# Dashboard (home)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                 \# shadcn/ui components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddPresetsButton.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddSourceButton.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ClustersList.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DocumentCard.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExportButton.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Modal.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RunsTable.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SearchInput.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SourcesList.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ StartRunButton.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts            \# Drizzle client
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.ts           \# DB schema export
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seed.ts             \# Initial data seeding
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tables.ts           \# Table definitions
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clustering.ts       \# Main clustering logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export.ts           \# Export to JSON/JSONL/MD/ZIP
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hashing.ts          \# MD5 URL hashing
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.ts           \# Pino logger setup
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ normalizeUrl.ts     \# URL normalization
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ retention.ts        \# Data cleanup
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rss.ts              \# RSS fetching with retry
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tfidf.ts            \# TF-IDF implementation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tokenize.ts         \# Text tokenization
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types.ts            \# Shared TypeScript types
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ maintenance.ts      \# Manual DB maintenance
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ worker/
‚îÇ       ‚îî‚îÄ‚îÄ index.ts            \# Worker process (fetch + cluster + export)
‚îÇ
‚îú‚îÄ‚îÄ pain-analyzer.db            \# SQLite database file
‚îú‚îÄ‚îÄ logs/                       \# JSONL log files (per run)
‚îú‚îÄ‚îÄ exports/                    \# Generated exports (ZIP archives)
‚îú‚îÄ‚îÄ drizzle.config.ts           \# Drizzle ORM config
‚îú‚îÄ‚îÄ next.config.ts              \# Next.js config
‚îú‚îÄ‚îÄ tailwind.config.ts          \# Tailwind config
‚îú‚îÄ‚îÄ tsconfig.json               \# TypeScript config
‚îú‚îÄ‚îÄ package.json                \# Dependencies
‚îî‚îÄ‚îÄ README.md                   \# This file

```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite Schema)

### –¢–∞–±–ª–∏—Ü–∞: `sources`
RSS-–∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

```sql
CREATE TABLE sources (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,               -- "TechCrunch"
  feed_url TEXT NOT NULL UNIQUE,    -- "https://techcrunch.com/feed/"
  plugin_type TEXT NOT NULL,        -- "generic" | "preset_habr" | ...
  enabled INTEGER DEFAULT 1,        -- 0 = disabled, 1 = enabled
  created_at INTEGER NOT NULL       -- Unix timestamp (ms)
);
```


### –¢–∞–±–ª–∏—Ü–∞: `documents`

–°–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ RSS.

```sql
CREATE TABLE documents (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  source_id INTEGER NOT NULL,           -- FK ‚Üí sources.id
  url TEXT NOT NULL,                    -- Original URL
  normalized_url TEXT NOT NULL UNIQUE,  -- Normalized URL (dedup)
  url_hash TEXT NOT NULL,               -- MD5(normalized_url)
  title TEXT NOT NULL,                  -- "Google hires Hume AI team"
  text_preview TEXT NOT NULL,           -- First 800 chars
  published_at INTEGER,                 -- Unix timestamp (ms)
  fetched_at INTEGER NOT NULL,          -- Unix timestamp (ms)
  source_name TEXT NOT NULL,            -- Denormalized for perf
  FOREIGN KEY (source_id) REFERENCES sources(id)
);

CREATE INDEX idx_documents_source_id ON documents(source_id);
CREATE INDEX idx_documents_published_at ON documents(published_at);
CREATE INDEX idx_documents_normalized_url ON documents(normalized_url);
```


### –¢–∞–±–ª–∏—Ü–∞: `runs`

–ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—É—Å–∫–æ–≤ worker.

```sql
CREATE TABLE runs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  status TEXT NOT NULL,                 -- "pending" | "running" | "done" | "error"
  started_at INTEGER,                   -- Unix timestamp (ms)
  completed_at INTEGER,                 -- Unix timestamp (ms)
  stats TEXT,                           -- JSON: {"docs_fetched": 384, ...}
  error_message TEXT
);
```


### –¢–∞–±–ª–∏—Ü–∞: `clusters`

–ù–∞–π–¥–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

```sql
CREATE TABLE clusters (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  run_id INTEGER NOT NULL,              -- FK ‚Üí runs.id
  title TEXT NOT NULL,                  -- "ai, cost, efficiency"
  doc_count INTEGER NOT NULL,           -- 5
  avg_similarity REAL NOT NULL,         -- 0.45
  created_at INTEGER NOT NULL,          -- Unix timestamp (ms)
  FOREIGN KEY (run_id) REFERENCES runs(id)
);
```


### –¢–∞–±–ª–∏—Ü–∞: `cluster_documents`

–°–≤—è–∑—å –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (many-to-many).

```sql
CREATE TABLE cluster_documents (
  cluster_id INTEGER NOT NULL,          -- FK ‚Üí clusters.id
  document_id INTEGER NOT NULL,         -- FK ‚Üí documents.id
  similarity REAL NOT NULL,             -- 0.67
  PRIMARY KEY (cluster_id, document_id),
  FOREIGN KEY (cluster_id) REFERENCES clusters(id),
  FOREIGN KEY (document_id) REFERENCES documents(id)
);
```


### –¢–∞–±–ª–∏—Ü–∞: `config`

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã.

```sql
CREATE TABLE config (
  key TEXT PRIMARY KEY,                 -- "cluster_threshold"
  value TEXT NOT NULL,                  -- "0.22"
  description TEXT                      -- "Cosine similarity threshold"
);
```

**–ö–ª—é—á–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

- `cluster_threshold` = `"0.22"` ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ö–æ–∂–µ—Å—Ç—å –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ (0..1)
- `min_cluster_size` = `"2"` ‚Äî –º–∏–Ω–∏–º—É–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ
- `preview_length` = `"800"` ‚Äî –¥–ª–∏–Ω–∞ text_preview –≤ —Å–∏–º–≤–æ–ª–∞—Ö
- `fetch_timeout_ms` = `"15000"` ‚Äî —Ç–∞–π–º–∞—É—Ç HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- `retention_days` = `"30"` ‚Äî —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö


### –¢–∞–±–ª–∏—Ü–∞: `logs`

–õ–æ–≥–∏ worker (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ SQLite + JSONL —Ñ–∞–π–ª—ã).

```sql
CREATE TABLE logs (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  run_id INTEGER,                       -- NULL –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ª–æ–≥–æ–≤
  timestamp INTEGER NOT NULL,           -- Unix timestamp (ms)
  level TEXT NOT NULL,                  -- "info" | "warn" | "error"
  component TEXT NOT NULL,              -- "worker" | "fetch" | "cluster"
  message TEXT NOT NULL,
  meta TEXT                             -- JSON —Å –¥–æ–ø. –¥–∞–Ω–Ω—ã–º–∏
);
```


## –ê–ª–≥–æ—Ä–∏—Ç–º –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è

```typescript
// src/lib/tokenize.ts
function tokenize(text: string): string[] {
  return text
    .toLowerCase()
    .replace(/[^\u0400-\u04FF\w\s]/g, '') // –¢–æ–ª—å–∫–æ –∫–∏—Ä–∏–ª–ª–∏—Ü–∞, –ª–∞—Ç–∏–Ω–∏—Ü–∞, —Ü–∏—Ñ—Ä—ã
    .split(/\s+/)
    .filter(token => token.length >= 2)   // –ú–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞
    .filter(token => !isStopword(token)); // –£–¥–∞–ª—è–µ–º "–∏", "the", "–≤"
}
```

**–ü—Ä–∏–º–µ—Ä:**

- Input: `"Google hires Hume AI team for voice startup"`
- Output: `["google", "hires", "hume", "ai", "team", "voice", "startup"]`


### –®–∞–≥ 2: TF-IDF –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```typescript
// src/lib/tfidf.ts
function computeTFIDF(documents: Document[]) {
  // TF (term frequency): –∫–∞–∫ —á–∞—Å—Ç–æ —Å–ª–æ–≤–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ
  const tf = computeTermFrequency(doc);

  // IDF (inverse document frequency): –Ω–∞—Å–∫–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ —Å–ª–æ–≤–æ
  const idf = Math.log(totalDocs / docsContainingTerm);

  // TF-IDF = TF √ó IDF
  return tf * idf;
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –∫–∞–∂–¥—ã–π –¥–æ–∫—É–º–µ–Ω—Ç ‚Üí –≤–µ–∫—Ç–æ—Ä –∏–∑ 200 —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö —Å–ª–æ–≤ —Å –≤–µ—Å–∞–º–∏.

### –®–∞–≥ 3: Cosine Similarity

```typescript
function cosineSimilarity(vecA: Vector, vecB: Vector): number {
  const dot = sum(vecA[term] * vecB[term]);
  const normA = sqrt(sum(vecA[term]^2));
  const normB = sqrt(sum(vecB[term]^2));
  return dot / (normA * normB); // 0 = —Ä–∞–∑–Ω—ã–µ, 1 = –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ
}
```


### –®–∞–≥ 4: –ñ–∞–¥–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞

```typescript
// src/lib/clustering.ts
function greedyCluster(docs: Document[], threshold: number, minSize: number) {
  // 1. –°–æ—Ä—Ç–∏—Ä—É–µ–º –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ –¥–ª–∏–Ω–µ (DESC)
  docs.sort((a, b) => b.title.length - a.title.length);

  for (const coreDoc of docs) {
    const group = [coreDoc];

    // 2. –ù–∞—Ö–æ–¥–∏–º –ø–æ—Ö–æ–∂–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
    for (const candidate of remainingDocs) {
      if (cosineSimilarity(coreDoc, candidate) >= threshold) {
        group.push(candidate);
      }
    }

    // 3. –ï—Å–ª–∏ –≥—Ä—É–ø–ø–∞ >= minSize ‚Üí —Å–æ–∑–¥–∞—ë–º –∫–ª–∞—Å—Ç–µ—Ä
    if (group.length >= minSize) {
      clusters.push({
        title: extractTopTerms(group, 3).join(', '),
        docs: group
      });
    }
  }
}
```


## API Endpoints

### Sources (–ò—Å—Ç–æ—á–Ω–∏–∫–∏)

#### `GET /api/sources`

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

**Response:**

```json
[
  {
    "id": 1,
    "name": "Habr",
    "feed_url": "https://habr.com/ru/rss/best/daily/",
    "plugin_type": "preset_habr",
    "enabled": 1,
    "created_at": 1769113931292
  }
]
```


#### `POST /api/sources`

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫.

**Request:**

```json
{
  "name": "–ù–æ–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫",
  "feed_url": "https://example.com/rss",
  "plugin_type": "generic"
}
```

**Response:**

```json
{
  "success": true,
  "id": 16
}
```


#### `DELETE /api/sources/:id`

–£–¥–∞–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫.

**Response:**

```json
{"success": true}
```


### Runs (–ó–∞–ø—É—Å–∫–∏)

#### `GET /api/runs`

–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø—É—Å–∫–æ–≤.

**Response:**

```json
[
  {
    "id": 6,
    "status": "done",
    "started_at": 1769115594906,
    "completed_at": 1769115608106,
    "stats": {
      "docs_fetched": 384,
      "docs_new": 312,
      "docs_updated": 72,
      "clusters_created": 29,
      "duration_ms": 13200
    }
  }
]
```


#### `POST /api/runs/start`

–ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π —Å–±–æ—Ä.

**Response:**

```json
{"runId": 7}
```


#### `GET /api/runs/:id`

–î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞.

**Response:** –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `GET /api/runs`, –Ω–æ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç.

### Clusters (–ö–ª–∞—Å—Ç–µ—Ä—ã)

#### `GET /api/clusters?runId=6`

–ü–æ–ª—É—á–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ run.

**Response:**

```json
[
  {
    "id": 1,
    "title": "ai, cost, efficiency",
    "doc_count": 5,
    "avg_similarity": 0.45,
    "documents": [
      {
        "id": 67,
        "title": "Google hires Hume AI team",
        "url": "https://techcrunch.com/...",
        "similarity": 1.0
      }
    ]
  }
]
```


#### `GET /api/clusters/:id`

–î–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞.

**Response:** –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Ç–µ—Ä–∞ —Å –ø–æ–ª–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

### Export (–≠–∫—Å–ø–æ—Ä—Ç)

#### `GET /api/export/:runId`

–°–∫–∞—á–∞—Ç—å ZIP-–∞—Ä—Ö–∏–≤ —Å –æ—Ç—á—ë—Ç–∞–º–∏.

**Response:** Binary file `run-6-export.zip` —Å–æ–¥–µ—Ä–∂–∏—Ç:

- `report.json` ‚Äî –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `raw_documents.jsonl` ‚Äî –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
- `report.md` ‚Äî Markdown –æ—Ç—á—ë—Ç


### Search (–ü–æ–∏—Å–∫)

#### `GET /api/search?q=ai&source=TechCrunch`

–ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

**Query params:**

- `q` ‚Äî –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–ø–æ title + text_preview)
- `source` ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `startDate` ‚Äî –æ—Ç –¥–∞—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `endDate` ‚Äî –¥–æ –¥–∞—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**Response:**

```json
{
  "results": [
    {
      "id": 67,
      "title": "Google hires Hume AI team",
      "text_preview": "Google has hired...",
      "url": "https://...",
      "source_name": "TechCrunch",
      "published_at": 1769094771000
    }
  ],
  "total": 15
}
```


### Logs (–õ–æ–≥–∏)

#### `GET /api/logs?runId=6&level=error`

–ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ worker.

**Query params:**

- `runId` ‚Äî ID –∑–∞–ø—É—Å–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –±–µ–∑ –Ω–µ–≥–æ = –≤—Å–µ –ª–æ–≥–∏)
- `level` ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ —É—Ä–æ–≤–Ω—é: `info` | `warn` | `error`

**Response:**

```json
[
  {
    "timestamp": 1769115594906,
    "level": "info",
    "component": "worker",
    "message": "Starting run",
    "meta": {"runId": 6}
  }
]
```


## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 24+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 24.11.1)
- npm 10+
- macOS/Linux (Windows –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å)


### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/mixamonakh/pain-analyzer.git
cd pain-analyzer
npm install
```


### –®–∞–≥ 2: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î

```bash
npx drizzle-kit push  # –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É
npm run seed          # –ó–∞–ø–æ–ª–Ω–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:

- –§–∞–π–ª `pain-analyzer.db`
- 3 preset –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (Habr, VC.ru, TechCrunch)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é


### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ worker (–ø–µ—Ä–≤—ã–π —Å–±–æ—Ä)

```bash
npm run worker
```

Worker –≤—ã–ø–æ–ª–Ω–∏—Ç:

1. –ó–∞–≥—Ä—É–∑–∫—É RSS –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
2. –ü–∞—Ä—Å–∏–Ω–≥ –∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é
3. –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é (TF-IDF + cosine similarity)
4. –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ –≤ `/exports/run-X/`
5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `/logs/run-X.jsonl`

–¢–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: **10-20 —Å–µ–∫—É–Ω–¥** –¥–ª—è 300-400 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏

#### –ß–µ—Ä–µ–∑ SQLite CLI

```bash
sqlite3 pain-analyzer.db "UPDATE config SET value='0.18' WHERE key='cluster_threshold'"
sqlite3 pain-analyzer.db "UPDATE config SET value='3' WHERE key='min_cluster_size'"
```


#### –ß–µ—Ä–µ–∑ –∫–æ–¥ (–±—É–¥—É—â–∞—è –∞–¥–º–∏–Ω–∫–∞)

```typescript
await db.update(config)
  .set({value: '0.18'})
  .where(eq(config.key, 'cluster_threshold'));
```


### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏

**cluster_threshold** (0..1, default 0.22)

- –í—ã—à–µ = –º–µ–Ω—å—à–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤, –Ω–æ –±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö
- –ù–∏–∂–µ = –±–æ–ª—å—à–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤, –Ω–æ –º–µ–Ω–µ–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω: 0.18-0.35

**min_cluster_size** (default 2)

- –ú–∏–Ω–∏–º—É–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞
- –ú–µ–Ω—å—à–µ = –±–æ–ª—å—à–µ –º–∞–ª–µ–Ω—å–∫–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
- –ë–æ–ª—å—à–µ = —Ç–æ–ª—å–∫–æ –∫—Ä—É–ø–Ω—ã–µ —Ç–µ–º—ã

**preview_length** (default 800)

- –î–ª–∏–Ω–∞ text_preview –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- –ë–æ–ª—å—à–µ = —Ç–æ—á–Ω–µ–µ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ


### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ RSS-–∏—Å—Ç–æ—á–Ω–∏–∫–∞

#### –ß–µ—Ä–µ–∑ UI

1. –û—Ç–∫—Ä–æ–π—Ç–µ `/sources`
2. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫"
3. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ URL RSS-–ª–µ–Ω—Ç—ã

#### –ß–µ—Ä–µ–∑ API

```bash
curl -X POST http://localhost:3000/api/sources \
  -H "Content-Type: application/json" \
  -d '{
    "name": "The Verge",
    "feed_url": "https://www.theverge.com/rss/index.xml",
    "plugin_type": "generic"
  }'
```


#### –ß–µ—Ä–µ–∑ SQL

```bash
sqlite3 pain-analyzer.db "INSERT INTO sources (name, feed_url, plugin_type, enabled, created_at) VALUES ('The Verge', 'https://www.theverge.com/rss/index.xml', 'generic', 1, $(date +%s)000)"
```


## Workflow —Ç–∏–ø–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Å–±–æ—Ä (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab (macOS/Linux)
0 9,14,20 * * * cd /path/to/pain-analyzer && npm run worker >> /var/log/pain-analyzer.log 2>&1
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç worker 3 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å: 9:00, 14:00, 20:00.

### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π Run
3. –ò–∑—É—á–∏—Ç–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä—ã
4. –°–∫–∞—á–∞–π—Ç–µ ZIP-–æ—Ç—á—ë—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### 3. –¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–ï—Å–ª–∏ –∫–ª–∞—Å—Ç–µ—Ä—ã –Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ:

- –£–≤–µ–ª–∏—á—å—Ç–µ `cluster_threshold` (–º–µ–Ω—å—à–µ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤, –Ω–æ —Ç–æ—á–Ω–µ–µ)
- –£–≤–µ–ª–∏—á—å—Ç–µ `min_cluster_size` (—Ç–æ–ª—å–∫–æ –∫—Ä—É–ø–Ω—ã–µ —Ç–µ–º—ã)
- –î–æ–±–∞–≤—å—Ç–µ —Å—Ç–æ–ø-—Å–ª–æ–≤–∞ (—Å–º. `src/lib/tokenize.ts`)

–ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≤—ã–π Run –∏ —Å—Ä–∞–≤–Ω–∏—Ç–µ.

## Roadmap

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (v0.1)

- [x] RSS –ø–∞—Ä—Å–∏–Ω–≥ —Å retry –∏ –ø—Ä–æ–∫—Å–∏
- [x] SQLite + Drizzle ORM
- [x] TF-IDF –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
- [x] Next.js UI (dashboard, sources, clusters)
- [x] –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON/JSONL/MD/ZIP
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (pino + SQLite + JSONL)
- [x] –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è URL
- [x] API Routes –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è


### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (v0.2)

- [ ] –ê–¥–º–∏–Ω–∫–∞ –¥–ª—è config (UI –≤–º–µ—Å—Ç–æ SQL)
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/documents` —Å –ø–æ–∏—Å–∫–æ–º (FTS5)
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å—Ç–æ–ø-—Å–ª–æ–≤–∞ (domain-specific)
- [ ] –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ worker (launchd/systemd)
- [ ] Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] GPT-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –∫–ª–∞—Å—Ç–µ—Ä–æ–≤


### üîÆ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è (v0.3+)

- [ ] Plugin system (—Ä–∞—Å—à–∏—Ä—è–µ–º—ã–µ –ø–∞—Ä—Å–µ—Ä—ã)
- [ ] Normalization layer (–µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
- [ ] Processing pipeline (job queue)
- [ ] Analytics dashboard (—Ç—Ä–µ–Ω–¥—ã, –º–µ—Ç—Ä–∏–∫–∏)
- [ ] Webhook integrations (Zapier, Make)
- [ ] AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤ UI (—á–∞—Ç –ø—Ä–æ –∫–ª–∞—Å—Ç–µ—Ä—ã)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Docker + CI/CD


## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Worker –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î
sqlite3 pain-analyzer.db ".tables"

# –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã –Ω–µ—Ç, –∑–∞–ø—É—Å—Ç–∏—Ç–µ seed
npm run seed
```


### –ö–ª–∞—Å—Ç–µ—Ä—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

```bash
# –°–Ω–∏–∑—å—Ç–µ –ø–æ—Ä–æ–≥
sqlite3 pain-analyzer.db "UPDATE config SET value='0.18' WHERE key='cluster_threshold'"

# –°–Ω–∏–∑—å—Ç–µ min_cluster_size
sqlite3 pain-analyzer.db "UPDATE config SET value='2' WHERE key='min_cluster_size'"
```


### –ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (timeout)

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –£–≤–µ–ª–∏—á—å—Ç–µ `fetch_timeout_ms` –≤ config
- –£–¥–∞–ª–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫, –µ—Å–ª–∏ –æ–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:

```bash
curl -X DELETE http://localhost:3000/api/sources/4
```


### Next.js –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç

```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à
rm -rf .next
npm run dev
```


## –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** ‚Äî SQLite –≤–º–µ—Å—Ç–æ Postgres, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –≤–º–µ—Å—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö
2. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** ‚Äî lib —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã, –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
3. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** ‚Äî plugin_type –≥–æ—Ç–æ–≤ –¥–ª—è –±—É–¥—É—â–∏—Ö –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è worker –ø–∏—à—É—Ç—Å—è –≤ logs

### –°—Ç–∏–ª—å –∫–æ–¥–∞

- TypeScript strict mode
- ESLint + Prettier (–∞–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (pure functions –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ)
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º –≤ —Å–ª–æ–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö


### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ–∏—á—É

1. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ GitHub (–æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É)
2. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É `feature/–Ω–∞–∑–≤–∞–Ω–∏–µ`
4. –ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–¥ + —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
5. –°–¥–µ–ª–∞–π—Ç–µ PR —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –ê–≤—Ç–æ—Ä

**–ú–∏—à–∞ (mixamonakh)**
Frontend Developer, Moscow
GitHub: https://github.com/mixamonakh

---
